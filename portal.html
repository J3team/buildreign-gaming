<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Tickets - BuildReign Gaming</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="support.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-wrapper">
                <div class="logo">
                    <a href="index.html" style="text-decoration: none;">
                        <h1>BuildReign<span class="gaming">Gaming</span></h1>
                    </a>
                </div>
                <ul class="nav-menu">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="index.html#chairs">Gaming Chairs</a></li>
                    <li><a href="index.html#desks">Gaming Desks</a></li>
                    <li><a href="support.html">Support</a></li>
                    <li><a href="portal.html" class="active">My Tickets</a></li>
                </ul>
                <div class="user-menu">
                    <span id="userGreeting" class="user-greeting"></span>
                    <button class="btn btn-small" id="logoutBtn" style="display: none;">Logout</button>
                    <button class="btn btn-small" id="portalLoginBtn">Login</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Portal Hero -->
    <section class="support-hero">
        <div class="container">
            <h1>Customer Portal</h1>
            <p>View and manage your support tickets</p>
        </div>
    </section>

    <!-- Portal Content -->
    <div class="container support-container">
        <!-- Login Required (shown by default) -->
        <div id="portalLoginRequired" class="portal-login-section">
            <div class="login-card">
                <div class="lock-icon">üîí</div>
                <h2>Login Required</h2>
                <p>Please login to view your support tickets</p>
                <button class="btn btn-primary btn-large" onclick="showLoginModal()">Login to Portal</button>
                <p class="login-help">Don't have an account? <a href="#" onclick="showRegisterModal()">Create one now</a></p>
            </div>
        </div>

        <!-- Portal Dashboard (hidden by default) -->
        <div id="portalDashboard" class="portal-dashboard" style="display: none;">
            <div class="dashboard-stats">
                <div class="stat-card">
                    <div class="stat-icon">üìä</div>
                    <div class="stat-info">
                        <h3 id="totalTickets">0</h3>
                        <p>Total Tickets</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üü¢</div>
                    <div class="stat-info">
                        <h3 id="openTickets">0</h3>
                        <p>Open Tickets</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚è≥</div>
                    <div class="stat-info">
                        <h3 id="pendingTickets">0</h3>
                        <p>Pending Reply</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚úì</div>
                    <div class="stat-info">
                        <h3 id="closedTickets">0</h3>
                        <p>Closed Tickets</p>
                    </div>
                </div>
            </div>

            <div class="portal-actions">
                <a href="support.html" class="btn btn-primary">
                    <span class="btn-icon">‚ûï</span>
                    New Ticket
                </a>
                <div class="filter-group">
                    <label>Filter by Status:</label>
                    <select id="statusFilter" class="filter-select">
                        <option value="all">All Tickets</option>
                        <option value="open">Open</option>
                        <option value="in-progress">In Progress</option>
                        <option value="awaiting-reply">Awaiting Reply</option>
                        <option value="closed">Closed</option>
                    </select>
                </div>
            </div>

            <!-- Tickets List -->
            <div class="support-card">
                <div class="card-header">
                    <h2>My Support Tickets</h2>
                    <p>Click on a ticket to view details and replies</p>
                </div>
                <div id="ticketsList" class="tickets-list">
                    <!-- Tickets will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Ticket Details Modal -->
    <div id="ticketModal" class="modal">
        <div class="modal-content modal-large">
            <span class="modal-close">&times;</span>
            <div class="ticket-details">
                <div class="ticket-header">
                    <div>
                        <h2>Ticket #<span id="modalTicketNumber"></span></h2>
                        <p class="ticket-subject" id="modalSubject"></p>
                    </div>
                    <span class="status-badge" id="modalStatus"></span>
                </div>

                <div class="ticket-meta">
                    <div class="meta-item">
                        <strong>Department:</strong>
                        <span id="modalDepartment"></span>
                    </div>
                    <div class="meta-item">
                        <strong>Priority:</strong>
                        <span id="modalPriority"></span>
                    </div>
                    <div class="meta-item">
                        <strong>Created:</strong>
                        <span id="modalCreated"></span>
                    </div>
                    <div class="meta-item">
                        <strong>Last Update:</strong>
                        <span id="modalUpdated"></span>
                    </div>
                </div>

                <div class="ticket-messages" id="ticketMessages">
                    <!-- Messages will be loaded here -->
                </div>

                <div class="ticket-reply">
                    <h3>Add Reply</h3>
                    <form id="replyForm">
                        <textarea id="replyMessage" placeholder="Type your reply here..." rows="4"></textarea>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Send Reply</button>
                            <button type="button" class="btn btn-secondary" onclick="closeTicketModal()">Close</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <h2>Customer Login</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Email Address</label>
                    <input type="email" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Login</button>
                    <button type="button" class="btn btn-secondary" onclick="showRegisterModal()">Create Account</button>
                </div>
                <p class="form-note">Demo: Use any email/password to login</p>
            </form>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <h2>Create Account</h2>
            <form id="registerForm">
                <div class="form-group">
                    <label for="regName">Full Name</label>
                    <input type="text" id="regName" required>
                </div>
                <div class="form-group">
                    <label for="regEmail">Email Address</label>
                    <input type="email" id="regEmail" required>
                </div>
                <div class="form-group">
                    <label for="regPassword">Password</label>
                    <input type="password" id="regPassword" required>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Create Account</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-section">
                    <h3>BuildReign Gaming</h3>
                    <p>Premium gaming furniture and accessories for the ultimate gaming experience.</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="index.html#chairs">Gaming Chairs</a></li>
                        <li><a href="index.html#desks">Gaming Desks</a></li>
                        <li><a href="support.html">Support</a></li>
                        <li><a href="portal.html">My Tickets</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Support</h4>
                    <ul>
                        <li><a href="#">Shipping Info</a></li>
                        <li><a href="#">Returns</a></li>
                        <li><a href="#">Warranty</a></li>
                        <li><a href="#">FAQ</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Contact Us</h4>
                    <p>Email: support@buildreigngaming.com</p>
                    <p>Phone: 1-800-BUILD-RG</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 BuildReign Gaming. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="support.js"></script>
</body>
</html>
